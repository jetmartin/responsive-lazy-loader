/**
 * @file
 * responsivelazyloader JQuery plugin
 * @see : http://jetmartin.github.io/responsive-lazy-loader
 * Version 0.1.8
 */
(function(e){e.fn.responsivelazyloader=function(t){function o(t){var r="defaults";for(var i in n.displays){if(e(t).hasClass(n.displays[i].gridClass)||e(t).closest(n.displays[i].parent!=undefined?n.displays[i].parent:"."+n.displays[i].gridClass).hasClass(n.displays[i].gridClass)){r=i;break}}e(t).attr("data-display",r)}function u(t){if(!e(t).attr("data-display")){o(t)}var r=e(t).attr("data-display");var i=null;if(r){if(n.displays[r]){if(n.displays[r].display[s]){i=n.displays[r].display[s]}else if(n.displays[r].display.defaults){i=n.displays[r].display.defaults}}}if(!i){if(n.displays.defaults.display[s]){i=n.displays.defaults.display[s]}else{i=n.displays.defaults.display.defaults}}if(e(t).attr("data-src-"+r+"-"+s)){return e(t).attr("data-src-"+r+"-"+s).replace(n.token,i)}else if(e(t).attr("data-src-"+r)){return e(t).attr("data-src-"+r).replace(n.token,i)}else if(e(t).attr("data-src-"+s)){return e(t).attr("data-src-"+s).replace(n.token,i)}else if(e(t).attr("data-src")){return e(t).attr("data-src").replace(n.token,i)}else{return e(t).attr("src")}return null}function a(t,n,r){t.each(function(){if(e.fn.responsivelazyloader.windowView(this,n)||n.force===true){if(e(this).attr("data-current-mediaq")!==s){e(this).attr("data-current-mediaq",s);f(this,r);e(this).fadeIn(400)}}})}function f(t,o){e(t).hide().one("load",function(){if("naturalWidth"in this!==true||"naturalHeight"in this!==true){e(this).hide().css("width","auto");this.naturalWidth=e(this).width();this.naturalHeight=e(this).height();e(this).show()}e.event.trigger({type:"responsiveImageLoaded",image:e(this)});if(e(this).attr("data-loaded")===undefined){i-=1;e(this).attr("data-loaded",true)}if(o===undefined||o==="load"||o==="scroll"&&n.useScroll||o==="resize"&&n.useResize){n.onImageShow.call(e(this))}if(i===0){n.onAllImagesLoad.call(r,{query:s});i=r.length}if(typeof e(this).off!=="undefined"){e(this).off("error")}}).each(function(){if(this.width>0&&this.height>0){e(this).trigger("load")}}).one("error",function(){if(e(this).attr("src")!==""){if(e(this).attr("data-loaded")===undefined){i-=1;e(this).attr("data-loaded",true)}n.onImageError()}}).attr("src",null).attr("src",u(t))}var n=e.extend(e.fn.responsivelazyloader.defaults,t);var r=e(this).filter("img");var i=r.length;if(i>0){var s=e.fn.responsivelazyloader.getCurrentMediaQuery();e(document).ready(function(){a(r,n,"load")});e(window).bind("scroll",function(e){a(r,n,"scroll")});e(window).resize(function(t){var i=e.fn.responsivelazyloader.getCurrentMediaQuery();if(s!==i){e.event.trigger({type:"onMediaqueryChange",CurrentMediaQuery:i,PreviousMediaQuery:s});s=i;a(r,n,"resize")}})}return e(this)};e.fn.responsivelazyloader.is_valid_mediaQuery=function(e){if("matchMedia"in window){if(window.matchMedia(e).matches){return true}else{return false}}else if(typeof Modernizr!=="undefined"){if(Modernizr.mq(e)){return true}else{return false}}return false};e.fn.responsivelazyloader.getCurrentMediaQuery=function(){var t="defaults";var n=e.fn.responsivelazyloader.defaults;for(var r in n.mediaQueries){if(e.fn.responsivelazyloader.is_valid_mediaQuery(n.mediaQueries[r])){t=r}}return t};e.fn.responsivelazyloader.windowView=function(t,n){var r=e(window).height(),i=e(window).width(),s=e(window).scrollTop()-n.distance,o=s+r+n.distance*2,u=e(window).scrollLeft()-n.distance,a=u+i+n.distance*2,f=e(t).height(),l=e(t).width(),c=e(t).offset().top-n.distance,h=c+f+n.distance,p=e(t).offset().left-n.distance,d=p+l+n.distance;return(o>=c&&s<=c||o>=h&&s<=h)&&(a>=p&&u<=p||a>=d&&u<=d)};e.fn.responsivelazyloader.defaults={distance:0,force:false,useScroll:true,useResize:true,token:"[[display]]",mediaQueries:{phone:"(max-width: 460px)",tablet:"(min-width: 461px) and (max-width: 991px)",desktop:"(min-width: 992px)"},displays:{defaults:{display:{tablet:"tablet",phone:"phone",defaults:"desktop"}}},onImageShow:function(){},onImageError:function(){},onAllImagesLoad:function(){}}})(jQuery)